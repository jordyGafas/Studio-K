<?php global $woocommerce; ?>
<div class="shopping-list u-pf">
	<div class="shopping-list__close">
		<button class="c-button c-button--primary js-list-close">
      <div class="c-button__inner">
        <div class="c-button__icon">
        <svg width="18" height="18" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><g fill="#2C2D85" fill-rule="nonzero"><path d="M17.359 1.373s-.034 0-.05.028c-.018.028-.097.118-.119.039a.079.079 0 0 0-.045-.079.253.253 0 0 0 0-.112c-.062 0-.113 0-.191.045a.866.866 0 0 1-.169 0h-.079c-.011 0-.062-.056-.056-.096.006-.04.056-.05.045-.073h-.062l-.101-.096c.062-.045 0-.067.05-.106v-.04s-.095.05-.123 0c-.028-.05-.062 0-.09 0a.04.04 0 0 0 0-.028h-.062c-.017 0 0-.045-.034-.068-.034-.022.045-.078 0-.106l-.05-.051V.602a.292.292 0 0 0-.158.084V.658c-.079.034-.04-.09-.113-.112 0 0 .034-.034.029-.051l.039-.04-.152-.1c-.05 0-.124.056-.18.056-.067.061-.112 0-.186.09-.073.09 0 0-.028 0h-.05a.084.084 0 0 0-.068 0 .298.298 0 0 0-.197.151s-.039.107-.073.08a.934.934 0 0 0-.135.061h-.028a.478.478 0 0 1-.146.124c-.028 0-.062 0-.101.056-.04.056-.062.056-.085.034a.292.292 0 0 1-.107.09l-.056.056-.04.04-.078.078-.096.102-.095.1-.113.119-.101.101v.034c0 .034-.079.067-.062.09-.066.09-.14.175-.22.253-.027.034-.078.068-.061.09.017.022-.079.067-.062.09l-.563.563v.033l-.033.04s-.056.05-.045.073l-.096.095-.04.04v.05c0 .017-.084.08-.129.107-.028.05-.14.113-.118.152l-.118.118c-.028 0-.079.068-.062.09 0 .034-.09.096-.067.124.022.028-.197.169-.203.23l-.034.04-.056.056-.135.14-.095.097-.208.202-.057.062-.191.14c-.034 0-.084.119-.107.09-.022-.028 0 .04-.05.068-.051.028-.04 0-.068.05l-.27.276-.248.259-.056.062-.112.118-.073.079-.04.04-.135.134-.04.04-.039.039s-.05.056-.067.045c-.096.118-.169.146-.259.247l-.056.062-.04.04-.112.118-.034.04-.078.078-.096.096-.096.1-.078.08-.08.078-.129.14h-.033l-.056.063-.096.101-.04.04c-.033 0-.084.112-.106.084l-.04.04-.112.117-.096.102-.095.095-.462.478C6.688 9.49 5.271 10.794 4.05 12.1c0 .085-.18.197-.253.287-.203.265-.563.563-.793.844-.04 0-.085.118-.113.084-.028-.033 0 .034 0 .057 0 .022 0 0-.034 0l-.607.393-.158.158-.039.04-.073.078-.079.079-.135.14-.04.04-.038.067-.062.062c-.028.028-.08.068-.062.09-.14.146-.214.276-.36.422-.028.045-.14.113-.118.146a.388.388 0 0 0-.102.13l-.039.039-.096.107a.495.495 0 0 0-.067.095.14.14 0 0 0 0 .04l-.034.04s-.034.055-.062.09c-.028.033-.13.055-.118.117a.833.833 0 0 1 .14-.09c.04-.05.063-.045.09-.067.029-.023-.05.062-.027.084v.056c-.08.062-.057.096-.124.152.112-.05 0 .08.096.057a.174.174 0 0 0 .067-.051.073.073 0 0 0 .067 0c.034 0 .08-.034.102 0 .022.034 0 0 0 .028l-.118.118c0 .073 0 .056.056.096-.062.062-.034.107-.13.18-.028.045 0 .084 0 .13 0 .044.282-.198.203-.035 0 .062.05.051.101 0 .05-.05 0 .04 0 .057s.034 0 .05-.028c.01.019.01.042 0 .061 0 .04 0 0 .04.04s-.107.169 0 .073a.833.833 0 0 0 .14-.09s.057-.05.085-.034c.028.017.034 0 .062 0 .028 0 0 .04 0 .056 0 .017-.028.04 0 .051-.13.107-.095.13-.067.169l-.034.04v.05c0 .017.034 0 .05-.028.017-.028.051 0 .074 0 .039 0 0 0 .033.04l-.039.038-.062.057c-.045.073-.073.04-.124.107-.05.067-.045.028-.073.045.13.033.175.078.338 0 .05 0 .118-.102.163-.068 0 .045-.09.113-.14.169l-.22.23-.04.04h.08a.281.281 0 0 0 .106-.09c.045 0 .107-.068.152-.079a.894.894 0 0 1 .14-.096s.046-.028.068 0c.023.029 0 .04 0 .057-.112.163.118.107.197 0h.045c.045 0 0 0 .05-.028.051-.029-.044.073 0 .095a.478.478 0 0 0-.146.13h-.033c.039.084.095 0 .18-.057a2.02 2.02 0 0 0 .697-.438l.04-.04s0 .068.039.04a5.49 5.49 0 0 0 1.125-.94c0-.045.09-.056.135-.135l.152-.146.04-.04.106-.078s.05-.028.073-.05c.023-.023 0 0 0-.035l.04-.039h.033c.034 0 .18-.185.203-.264l.095-.096.04-.04c0 .034.112-.072.079-.078l.073-.079c.196-.146.36-.394.562-.562a.225.225 0 0 0 .084-.107l.096-.101.085-.118c.129-.08.253-.293.421-.434a1.85 1.85 0 0 0 .253-.287l.113-.123.191-.197c.034-.034.085-.068.068-.09.27-.276.703-.703.956-.99.385-.47.8-.916 1.243-1.333l.056-.056c.189-.24.406-.456.647-.642.079-.123.265-.225.332-.371.253-.264.45-.433.658-.624.034-.04.056 0 .09-.068.079-.124.253-.225.372-.41l.056-.057c.086-.04.168-.09.242-.152a.174.174 0 0 0 .09-.061c.045-.096.112-.102.19-.203l.063-.056c.291-.24.57-.495.832-.765l.101-.096s.034 0 .057-.04l.04-.039.23-.236.095-.095.04-.04.191-.197.135-.14a6.39 6.39 0 0 0 .776-.748l.04-.04.174-.174.31-.32.072-.08c.107-.09.226-.264.321-.303l.056-.057.062-.061.056-.057.04-.04.247-.258.04-.04c.185-.202.365-.41.517-.607a.619.619 0 0 0 .14-.174l.096-.096c.08-.076.148-.163.203-.259v-.033c.08-.143.134-.3.157-.462l.152-.202s.034-.05 0-.067c-.033-.017.124-.152.102-.209-.023-.056-.068-.084-.074-.18-.005-.095.068-.118.034-.163.096-.123-.067 0-.095 0h-.029c0-.084.096-.067.152-.13.057-.061.045-.027.062 0l.056-.061c.046-.107.046-.135-.033-.067zM17.533 1.62c0 .028-.05.073 0 .096a1.164 1.164 0 0 1-.096.253c.136-.124.203-.388.136-.366l-.04.017z"/><path d="M16.138 16.644c0-.078-.05-.18.056-.247.08-.14.045-.32.248-.4.045-.033.034-.106.101-.095 0-.062-.04-.124 0-.175V15.7a.067.067 0 0 0 0-.084c0-.045 0-.05.073-.068a.613.613 0 0 0-.157-.331c-.068-.085-.135-.163-.192-.242a3.533 3.533 0 0 0-.658-.698s-.05-.028-.078-.05l-.214-.22-.034-.034c0-.084-.107-.19-.202-.292l-.377-.388-.079-.315-.163-.169c-.13-.101-.186-.202-.36-.365l-.31-.316-.562-.562c0-.056-.124-.13-.169-.197l-.18-.18-.163-.169-.034-.033-.523-.53-.348-.354-.13-.129-.034-.034-.146-.152-.506-.517-.034-.034-.18-.18c-.05 0-.118-.112-.174-.157l-.169-.163-.028-.034c-.14-.13-.175-.175-.315-.315a1.991 1.991 0 0 0-.281-.315c-.074-.084-.135-.09-.209-.186L9.54 7.82l-.034-.034-.05-.05-.214-.214-.197-.203-.225-.23c-.13-.113-.163-.203-.287-.316l-.77-.781-.36-.366s-.057-.067-.074-.056c-.016.011-.118-.163-.168-.163a1.035 1.035 0 0 1-.152-.18 3.105 3.105 0 0 1-.355-.383l-.061-.062-.231-.236-.377-.383-.113-.118c-.061-.073-.19-.157-.202-.225l-.084-.084-.242-.248a3.583 3.583 0 0 1-.383-.416c-.067-.05-.152-.18-.208-.185l-.096-.074-.157-.19c0 .027-.062-.057-.096-.074l-.095-.101-.05-.05s-.063-.051-.097-.068a1.56 1.56 0 0 1-.236-.197l-.034-.034c-.044 0-.056-.028-.09-.067-.033-.04-.118-.085-.18-.158a.562.562 0 0 1-.247-.185c-.13-.074-.264-.175-.394-.231l-.349-.186c-.168-.084-.331-.146-.506-.247 0 0-.056-.028-.079 0-.022.028 0 .045 0 .073 0 .028 0 .05-.056.062-.056.011-.05 0-.073-.028-.028-.006-.073-.006-.118-.006s-.18-.056-.186 0c.045.04.085.079.062.107a.343.343 0 0 1-.23-.068.917.917 0 0 0 0 .214l.033.034.034.034c.034.033-.095 0-.062.062 0 .033.056.073 0 .095-.056.023 0 .045 0 .073l.034.034v.113l.034.033.062.068a.276.276 0 0 0 0 .095c-.057.04-.119 0-.18 0h-.124c-.045 0-.04 0-.062-.039a.624.624 0 0 1-.09.006c-.067-.073-.062 0-.062.028a.5.5 0 0 1 .107.236l.079.079v.18a.124.124 0 0 0 0 .146c.045.028 0 .045 0 .073 0 .028 0 0 0 0s-.062 0-.107-.056-.028 0-.04 0l.068.067c0 .04.084.096.09.141.006.045 0 0 0 .04a.045.045 0 0 0-.068 0c-.056-.046 0-.074-.084-.113-.084-.04.017.062.017.084v.028c0 .028.101.09.146.124.079.101-.118 0-.084.084.034.085.174.113.169.192a1.125 1.125 0 0 1-.231-.158c0 .05-.067.034-.107 0h-.04l.046.05c.118.102.067.17.168.265.102.096.152.13.147.18l.084.079v.034l.096.095c0 .051.112.124.152.18.039.057.1.107.135.163.033.057.067.113.151.175.085.062.17.14.17.197l.258.264c.062.045.135.169.191.169.056 0 .079.14.13.135.202.191.292.343.506.512v.045c.139.113.269.237.388.371l.05.05.243.248c.198.166.386.345.562.534l.276.282a.444.444 0 0 1 .197.197l.41.416.062.067.264.265.456.461c.096.079.264.287.405.416.14.13.22.214.326.304l.175.18.067.068c.177.139.336.3.473.478.09.033.197.19.287.27l.084.084c.05 0 .118.113.174.152a.94.94 0 0 1 .18.185c.085.029.186.18.276.254.09.073.185.146.287.27l.264.264.146.152c.084.043.15.112.192.197.072.047.138.104.197.168.067.085.208.186.23.265.023.079.04.034.096.096.056.061.18.14.18.185l.05.045c.074.096.22.197.248.281l.034.034.18.18c.04.059.084.113.135.163l.225.23.033.035.293.298c.067.034.157.18.264.264l.034.034.163.163c.068.073.113.073.146.152a.94.94 0 0 1 .276.281c.169.146.36.366.523.529l.326.332.383.343c.062 0 .13.107.191.14l.028.034c.122.086.235.184.338.293l.647.438c.365.249.838.272 1.226.062.146-.078.163-.18.236-.27z"/><path d="M.81 3.234c.411.478.88.903 1.395 1.266.671.388 1.53.162 1.924-.506a1.44 1.44 0 0 0-.5-1.924c-.125-.09-.108-.073.055.045l-.151-.118a5.389 5.389 0 0 1-.72-.754 1.418 1.418 0 0 0-1.992 0 1.446 1.446 0 0 0 0 1.991H.81zM15.373.405l-1.215 1.412a1.434 1.434 0 0 0 0 1.986 1.429 1.429 0 0 0 1.991 0l1.215-1.407a1.44 1.44 0 0 0 0-1.991 1.429 1.429 0 0 0-1.99 0zM2.402 17.471l1.687-1.338c.548-.551.548-1.441 0-1.992a1.451 1.451 0 0 0-1.99 0L.41 15.486a1.406 1.406 0 0 0 0 1.985c.558.53 1.433.53 1.99 0z"/></g></svg>
        </div>
      </div>
    </button>
	</div>

	<div class="shopping-list__inner u-flex u-flex-wrap u-column">
		<div class="shopping-list__header">
			<h4 class="shopping-bag__title"><a href="<?php echo wc_get_cart_url(); ?>">your list</a></h4>
		</div>
		<?php if ( sizeof( $woocommerce->cart->get_cart() ) > 0 ) : ?>
		<div class="shopping-list__items">
			<?php $woocommerce->cart->cart_contents = array_reverse($woocommerce->cart->cart_contents); ?>
			<?php foreach ( $woocommerce->cart->get_cart() as $cart_item_key => $values ) :
			$_product = $values['data'];
			if ( $_product->exists() && $values['quantity'] > 0 ) :
				$product_quantity = esc_attr( $values['quantity'] );
				$product_price = (( get_option('woocommerce_display_cart_prices_excluding_tax') == 'yes' ) ? $_product->get_price_excluding_tax() : $_product->get_price()) * $product_quantity;
			?>
			<div class="shopping-list__item list-item u-flex u-flex-wrap u-align-v-center">
				<div class="list-item__thumb">
					<a href="<?php echo esc_url( get_permalink( apply_filters('woocommerce_in_cart_product_id', $values['product_id'] ) ) ); ?>" class="clearfix">
					<?php
					$image_thumb = wp_get_attachment_image_src($_product->image_id, 'thumbnail')[0];
					$alt_text = get_post_meta($_product->image_id, '_wp_attachment_image_alt', true);
					?>
						<img class="u-full" src="<?php echo $image_thumb; ?>" alt="<?php if ( $alt_text ) { ?><?php echo $alt_text; ?><?php } ?>">
					</a>
				</div>
				<div class="list-item__meta">
					<h6 class="list-item__title"><?php echo $_product->get_title(); ?></h6>
					<?php echo apply_filters( 'woocommerce_cart_item_remove_link', sprintf('<a href="%s" title="%s">Remove from list</a>', esc_url( wc_get_cart_remove_url( $cart_item_key ) ), __('Remove from list', 'woocommerce') ), $cart_item_key ); 
					?>
				</div>	
				<div class="list-item__price">
					<?php echo apply_filters('woocommerce_cart_item_price_html', woocommerce_price( $product_price ), $values, $cart_item_key ); ?>
					</div>		
			</div>
			<?php endif; ?>
			<?php endforeach; ?>
		</div>
		<div class="shopping-list__footer u-flex u-flex-wrap u-align-v-center">
			<div class="subtotal-price"><span>Subtotal:</span> <?php echo $woocommerce->cart->get_cart_total(); ?></div>
			<div class="request-quote-button"><a href="<?php echo wc_get_cart_url(); ?>" class="c-button c-button--pill">request quote</a></div>
		</div>
		<?php else: ?>
		<div class="shopping-list__empty">
			<p>your list is empty</p>
			<a href="<?php echo get_permalink( wc_get_page_id( 'shop' ) ); ?>" class="c-button c-button--pill">view collection</a>
		</div>
		<?php endif; ?>			
	</div> 
</div>